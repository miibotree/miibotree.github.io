<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
    

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.4"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.4" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Miibotree'thinking">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Miibotree'thinking">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Miibotree'thinking">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

    <title> Miibotree'thinking </title>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->




<div class="container one-column 
   page-home 
">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Miibotree'thinking</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
    </ul>
  

  
</nav>


        </div>
    </header>

    <main id="main" class="main">
        <div class="main-inner">
            <div id="content" class="content">
                
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/02/06/RaspberryPi-—-GPIO-control-LED/" itemprop="url">
                RaspberryPi — GPIO control LED
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-02-06T20:52:09+08:00" content="2014-02-06">
            2014-02-06
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <p>First, let&#8217;s see the GPIO ports in the raspberry,as shows in the figure below:</p>
<p><a href="http://miibotree.com/?attachment_id=897"><img src="http://miibotree.com/wp-content/uploads/2014/02/raspberry_pi_gpio_pinouts_1.jpg" alt="raspberry_pi_gpio_pinouts_1"></a><br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/02/06/RaspberryPi-—-GPIO-control-LED/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/01/29/A-udp-holing-example/" itemprop="url">
                A udp holing example
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-01-29T22:47:29+08:00" content="2014-01-29">
            2014-01-29
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>here is an udp holing example in github:</p>
<p><a href="https://github.com/mwarning/UDP-hole-punching-examples" target="_blank" rel="external">https://github.com/mwarning/UDP-hole-punching-examples</a></p>
<p>the example1 code is rather simple.</p>
<p>I config my VMware virtual machine with two virtual linux machines: Debian 7.</p>
<p>Each virtual machine use different NAT network setting.</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/01/28/关于网络/" itemprop="url">
                关于网络
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-01-28T00:53:46+08:00" content="2014-01-28">
            2014-01-28
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>这学期上完计算机网络这门课程之后，其实就一直想写一篇关于网络的文章。当然不是关于技术的，而是对网络本身的一些东西。</p>
<p><a href="http://miibotree.com/?attachment_id=887" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2014/01/06565401346077859.gif" alt="06565401346077859"></a></p>
<p><span id="more-886"></span></p>
<p>1.关于网络的物质性</p>
<p>上一篇文章谈论了物质和精神。其实唯物主义在网络面前有着很好的诠释。</p>
<p>我们上网，永远都必须依靠那些庞大的，复杂的，精密的硬件设备基础设施。家里，办公室里用的双绞线，路由器和交换机，发射无线信号的无线路由器，深深埋在地下的同轴电缆，光纤，跑在厂房里面提供服务的服务器集群，甚至深深埋在海底的海底光缆。说实话，上个网其实不是这么简单的事情。现在只要我插上网线或者是连上无线，在浏览器里面输入百度 谷歌，我都会有那么一瞬间臆想自己是网线里面的一个比特流然后通过双绞线同轴电缆光纤传送到大洋彼岸的某台服务器上被解析，然后再把所需要的数据传送回来。</p>
<p>中间只要有一个环节出错，那么很明显，我们就无法正确的上网了。</p>
<p>但是目前所有这些技术上的、硬件上的东西都不需要你担心。电信公司会为你做好这一切，只要你乖乖付钱包个年费，上网是再简单不过的事情。背后的东西，你可以一无所知。</p>
<p>下面这个TED的演讲链接的主题是：The internet could crash， We need a plan B.</p>
<p>网络可能崩溃，我们需要一个B计划：</p>
<p><a href="http://www.ted.com/talks/danny_hillis_the_internet_could_crash_we_need_a_plan_b.html" target="_blank" rel="external">http://www.ted.com/talks/danny_hillis_the_internet_could_crash_we_need_a_plan_b.html</a></p>
<p>这个演讲需要一个理论支持。在提出这个理论支持之前，试问，中国现阶段的主要矛盾是什么？</p>
<p>答：人民日益增长的物质文化需求与落后的社会生产之间的矛盾。</p>
<p>把这个回答放到网络中来。</p>
<p>现代社会信息的增长是成指数形式暴涨的；而硬件的更新是基本符合摩尔根定律的，也就是说每隔一年半翻一番。信息需要硬件作媒介承载，现在两者一个是火箭一个是老爷车，终有一天火箭想飞出地球却被老爷车给拖累了。所以一旦老爷车罢工不干了，那么后果将会非常可怕：试想我们已经开始把我们生活的方方面面都搬到了网络上：办公，娱乐，学习，交友。我们越来越依赖它以至于我们把它视为我们身体的一部分，现在一旦你的身体少了一部分，你还能继续正常生活么？</p>
<p>显然不能。</p>
<p>这也正是演讲者的目的：建立一个plan B。一切需要重新规划，有备无患。</p>
<p>既然有这个矛盾的存在，那么崩溃就是迟早的事。问题是，这个日子何时会到来？</p>
<p>2.关于网络的自由性</p>
<p>我不是一个纯粹的技术宅，我喜欢看小说。比如说下面这部小说：1984。</p>
<p>这是奥威尔的小说，小说中那个无处不在的老大哥让我印象颇深。</p>
<p>上两天DNS污染的事情搞得很大，由于那天肚子不舒服在医院挂点滴，所以没有赶上这个历史性的一刻，有点可惜。虽然到目前为止对于这个事件的真实原因自己也不清楚，但是对于GFW的非议，却是一直都存在的。</p>
<p>下面这个链接，是关于GFW的，当然了，要阅读这篇文章也必须越过GFW才可以了。有兴趣的同学可以看看：</p>
<p><a href="http://fangbinxing.appspot.com/" target="_blank" rel="external">http://fangbinxing.appspot.com/</a></p>
<p>GFW的成因的其中一个社会因素可能是为了打击邪教异教在网络上的传播势力。1999年的轮子事件闹得太大了，不得不采取措施。</p>
<p>GFW的形成，里面包含了太多的政治因素，已经完全超出了技术层面了。所以博客一开篇就拿拖鞋砸教授的学生们，只能说你们太天真了。</p>
<p>再说回到1984，GFW很像1984里面的老大哥，一双眼睛不处不在地盯着你看，你有什么非法举动都被它污染一下。但是，面对超大流量，目前GFW应该无法具体分析某个特定行为。连google这样的公司目前都在大量招人工智能领域的人才，GFW目前怕是没有能力做这件事情的。</p>
<p>然而，绝大多数的中国网民都是不知道GFW的存在的，因为根本没有必要知道。他们只要能够使用百度，使用qq，上网聊天看新闻炒股票玩游戏这就够了。</p>
<p>不得不说，GFW确实非常有存在的必要：保护中国网络市场。虽然GFW用的是思科的设备，但是他们已经尽力在用红旗Linux了。维护国家主权这样神圣的职责，不是光有技术就能胜任的。</p>
<p>任何东西都是双刃剑。知道它存在的人会抱怨它。没有办法上facebook，twitters，Google，因为已经有了人人，百度。然而中国的山寨能力确实很强，但是创新能力实在是太弱了。光是模仿的话，永远都跟在人家的屁股后面。</p>
<p>围墙可以把小公鸡围起来，但是却不能把草泥马围起来。</p>
<p>我还是相信未来的世界是开源的，相信GNU这样的组织是历史的功臣。</p>
<p>GFW确实有存在的必要性，但必须以确保网络的自由性为前提。两者不冲突，因为自由是积极的自由，GFW是挡那些消极的东西的。技术越来越成熟，GFW也会成熟起来。</p>
<p>3.关于网络的真实性</p>
<p>正是因为数据在光纤中的传播速度接近光速，所以我们可以获得在半个地球之外的服务器中的数据，信息获取的速度变快了，地球就变成地球村了。而且，我们可以把这样一种效果看成是虚拟现实增强。试想打电话可以看成是现实增强吧，隔着千山万水一个电话让两个人的声音仿佛近在咫尺，而网络起的也正是这样一种效果：信息仿佛近在咫尺，仿佛就发生在你身边一样。</p>
<p>这个时候如果我是一个神经病人，我就会开始怀疑这个世界：光是从网络上看到这些信息，那么对于我来说，这件事情到底有没有真实地发生过呢？</p>
<p>最典型的争议可以是 阿波罗登月 事件。我没有跟着宇航员去月球，那么对于我来说，这件事情到底是不是真实的呢？</p>
<p>就像你不知道跟你聊天的那么人在屏幕后面到底是一只猫还是一只狗一样，网络的真实性对于我们来说，变得越来越不真实。</p>
<p>斯诺登说，美国政府已经被外星人控制了。英国前国防部长说，外星人是真实存在的。</p>
<p>就因为这两个人说外星人存在我们就开始相信外星人真的存在了么？</p>
<p>学会明辨是非的能力是很重要的。防止自己被骗。有时候你还不知道你已经被骗了呢。</p>
<p>4.关于网络的未来</p>
<p>关于网络的未来，我认为必须要解决以上讲述的网络的三个性质。电视电话电脑之间的界限已经开始模糊了，反正用不了多久这些东西迟早都会合并的。或许10年之后电话就会进博物馆了。</p>
<p>未来的事情谁都预测不了。本文的目的也只是引发大家的思考。把自己的感想写出来，有什么不对的地方，还请指正。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/01/18/Peer-to-Peer-Communication/" itemprop="url">
                Peer-to-Peer Communication
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-01-18T18:03:30+08:00" content="2014-01-18">
            2014-01-18
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><a href="http://www.brynosaurus.com/pub/net/p2pnat/" target="_blank" rel="external">http://www.brynosaurus.com/pub/net/p2pnat/</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/01/18/FM-Transmitter-Lib-–-A-DoubanFM-Server-2/" itemprop="url">
                FM Transmitter Lib – A DoubanFM Server(2)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-01-18T11:06:17+08:00" content="2014-01-18">
            2014-01-18
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>In this passage, I finished the task that turn a Raspberry Pi into a DoubanFM Transmitter</p>
<p>I also refer to this blog:</p>
<p><a href="http://www.freemindworld.com/blog/2013/130218_douban_fm_with_raspberry_pi.shtml" target="_blank" rel="external">http://www.freemindworld.com/blog/2013/130218_douban_fm_with_raspberry_pi.shtml</a></p>
<p>Thanks for the author again.</p>
<p>here I refer to the project below:</p>
<p><a href="http://www.icrobotics.co.uk/wiki/index.php/Turning_the_Raspberry_Pi_Into_an_FM_Transmitter" target="_blank" rel="external">http://www.icrobotics.co.uk/wiki/index.php/Turning_the_Raspberry_Pi_Into_an_FM_Transmitter</a></p>
<p>We use GPIO of the raspberry, here is a blog that introduce the GPIO:</p>
<p><a href="http://elinux.org/RPi_Low-level_peripherals#General_Purpose_Input.2FOutput_.28GPIO.29" target="_blank" rel="external">http://elinux.org/RPi_Low-level_peripherals#General_Purpose_Input.2FOutput_.28GPIO.29</a></p>
<p><span id="more-879"></span></p>
<p>&nbsp;</p>
<p>We use the GPIO 4 port, to transmit the FM signal, and I use my NOKIA FM function to receive the signal.</p>
<p>It&#8217;s not difficult, just according to the project.</p>
<p>1.download the module to the RaspberryPi</p>
<p><a href="http://omattos.com/pifm.tar.gz" target="_blank" rel="external">http://omattos.com/pifm.tar.gz</a></p>
<p>2.tar &#038; release it</p>
<p>3.test it</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo python</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; import <span class="constant">PiFm</span></span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">PiFm</span>.play_sound(<span class="string">"sound.wav"</span>)</span><br></pre></td></tr></table></figure>
<p>the default FM frequency is 103.3, if you could see the sound,Congratulations!!</p>
<p>The sound is from Monster Hunter,really familiar to me! I was very excited when I hear the sound!!</p>
<p>4.try the execute ./fmd as ROOT</p>
<p>Note:your fmd.conf is in /root/.fmd when you execute the program as root</p>
<p>5.telnet to it, type command play.</p>
<p>If success, you will hear your DoubanFM songs!~~~~</p>
<p>Any questions,you can contact me by having a commit, I will try to help you.</p>
<p>And any false in my blog, please tell me. Thanks for every reader.</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2014/01/16/FMD–A-DoubanFM-Server-1/" itemprop="url">
                FMD–A DoubanFM Server(1)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2014-01-16T23:27:10+08:00" content="2014-01-16">
            2014-01-16
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>Since I borrowed a raspberryPi from my friend, I want to play it.</p>
<p>The first thing I do is to connect my raspberryPi into the TV.</p>
<p>I didn&#8217;t use the HDMI line, I use the AV line. It&#8217;s not hard.</p>
<p>And tomorrow I am going to buy a keyboard, and then I can coding towards TV. hha~~</p>
<p>This blog I wants to introduce how to build a DoubanFM Server on Linux.</p>
<p>Thanks for the author and his blog:</p>
<p><a href="http://www.freemindworld.com/blog/2013/130218_douban_fm_with_raspberry_pi.shtml" target="_blank" rel="external">http://www.freemindworld.com/blog/2013/130218_douban_fm_with_raspberry_pi.shtml</a></p>
<p>the github project is here:</p>
<p><a href="https://github.com/lifanxi/fmd" target="_blank" rel="external">https://github.com/lifanxi/fmd </a></p>
<p><span id="more-874"></span></p>
<p>here are some problems during I compile the project:</p>
<p>1.add library: libcurl, json-c, mpg123, libao and alsa.</p>
<p>please make sure that you install the devel packet. Otherwise it would not work.</p>
<p>2.alert the Makefile:</p>
<p>Since I use Fedora 19 x86 for test, I should alert Makefile:</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LIBS </span>=<span class="string"> -lcurl -ljson -lmpg123 -lao -lpthread -lm</span></span><br></pre></td></tr></table></figure>
<p>into:</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LIBS </span>=<span class="string"> -lcurl -ljson-c -lmpg123 -lao -lpthread -lm</span></span><br></pre></td></tr></table></figure>
<p>3.find your DoubanFM id</p>
<p>To get your own uid, uname, token and expire, try:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -<span class="tag">q</span> -O - --post-data=<span class="string">"email=[email]&amp;#038;password=[passwd]&amp;#038;app_name=radio_desktop_win&amp;#038;version=100"</span> <span class="string">"http://www.douban.com/j/app/login"</span></span><br></pre></td></tr></table></figure>
<p>Replace [email] and [passwd] with your douban account and password.</p>
<p>4.run fmd</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./fmd</span><br></pre></td></tr></table></figure>
<p>5.create a fmd.conf file</p>
<p>create a fmd.conf file in  /.fmd</p>
<p>like this:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">[DoubanFM]</span></span><br><span class="line"><span class="setting">channel = <span class="value"><span class="number">0</span></span></span></span><br><span class="line"><span class="setting">uid = <span class="value"><span class="number">123456</span></span></span></span><br><span class="line"><span class="setting">uname = <span class="value">username</span></span></span><br><span class="line"><span class="setting">token = <span class="value"><span class="number">1234</span>abcd</span></span></span><br><span class="line"><span class="setting">expire = <span class="value"><span class="number">1345000000</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="title">[Output]</span></span><br><span class="line"><span class="setting">driver = <span class="value">alsa</span></span></span><br><span class="line"><span class="setting">device = <span class="value">default</span></span></span><br><span class="line"><span class="setting">rate = <span class="value"><span class="number">44100</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="title">[Server]</span></span><br><span class="line"><span class="setting">address = <span class="value">localhost</span></span></span><br><span class="line"><span class="setting">port = <span class="value"><span class="number">10098</span></span></span></span><br></pre></td></tr></table></figure>
<p>Of course you should replace channel, uid and uname with your own.</p>
<p>OK.After these steps,your DoubanFM should work!</p>
<p>telnet on it for a test:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">telnet</span> localhost <span class="number">10098</span></span><br></pre></td></tr></table></figure>
<p>I got the reply:</p>
<p>{&#8220;status&#8221;:&#8221;stop&#8221;,&#8221;channel&#8221;:0,&#8221;user&#8221;:&#8221;魔方盒子&#8221;}play</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">play</span></span><br></pre></td></tr></table></figure>
<p>{&#8220;status&#8221;:&#8221;play&#8221;,&#8221;channel&#8221;:0,&#8221;user&#8221;:&#8221;魔方盒子&#8221;,&#8221;title&#8221;:&#8221;Lost In Tv&#8221;,&#8221;artist&#8221;:&#8221;Suede&#8221;, &#8220;album&#8221;:&#8221;A New Morning&#8221;,&#8221;year&#8221;:2002,&#8221;cover&#8221;:&#8221;<a href="http://img5.douban.com/mpic/s2698217.jpg&#8221;,&#8221;url&#8221;:&#8221;/subject/1394790/&#8221;,&#8221;sid&#8221;:1028033,&#8221;like&#8221;:0,&#8221;pos&#8221;:0,&#8221;len&#8221;:0}next" target="_blank" rel="external">http://img5.douban.com/mpic/s2698217.jpg&#8221;,&#8221;url&#8221;:&#8221;/subject/1394790/&#8221;,&#8221;sid&#8221;:1028033,&#8221;like&#8221;:0,&#8221;pos&#8221;:0,&#8221;len&#8221;:0}next</a></p>
<p>Yahh~~~ Perfect!</p>
<p>In my next blog, I am trying to plat it into raspberry!!~</p>
<p>Thanks for your reading and thanks for the authors.</p>
<p>Any questions, please have a commit.</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2013/12/19/网络嗅探工具Errercap/" itemprop="url">
                网络嗅探工具Errercap
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2013-12-19T22:22:59+08:00" content="2013-12-19">
            2013-12-19
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>连续看了将近三个星期的网络，《Data and Computer Communications  English Edition》看的我有点脑子发昏。不过看了这本书之后感觉对网络的很多概念清晰了很多。对自己的帮助还是很大的。</p>
<p>从物理介质开始，到OSI模型，到TCP/IP协议，广域网和局域网，电路交换分组交换，IEEE802.3以太网协议，IEEE802.11无线局域网，hub，bridge，switch，router之间的区别，路由选择，再到高层的协议。</p>
<p>总之有了一个整体的框架。接下来的时间如果有空的话准备多写几篇博客来记录。</p>
<p>下面这篇博客是我转载的，讲述了sniffer嗅探的原理</p>
<p>&nbsp;</p>
<p><span id="more-865"></span></p>
<h1 id="转载自Seth&#8217;s_Blog_by_hekai">转载自<a href="http://www.blhekai.com/" target="_blank" rel="external">Seth&#8217;s Blog by hekai</a></h1><p>&nbsp;</p>
<p>Sniffer的正当用处主要是分析网络的流量,以便找出所关心的网络中潜在的问题。例如,假设网络的某一段运行得不是很好,报文的发送比较慢,而 我们又不知道问题出在什么地方,此时就可以用嗅探器来作出精确的问题判断。在合理的网络中，Sniffer的存在对系统管理员是致关重要的，系统管理员通 过Sniffer可以诊断出大量的不可见模糊问题，这些问题涉及两台乃至多台计算机之间的异常通讯有些甚至牵涉到各种的协议，借助于Sniffer%2C 系统管理员可以方便的确定出多少的通讯量属于哪个网络协议、占主要通讯协议的主机是哪一台、大多数通讯目的地是哪台主机、报文发送占用多少时间、或者相互 主机的报文传送间隔时间等等，这些信息为管理员判断网络问题、管理网络区域提供了非常宝贵的信息。</p>
<p>&nbsp;</p>
<p>嗅探器与一般的键盘捕获程序不同。键盘捕获程序捕获在终端上输入的键值，而嗅探器则捕获真实的网络报文。</p>
<p>为了对Sniffer的工作原理有一个深入的了解，我们先简单介绍一下HUB与网卡的原理。</p>
<h2 id="预备知识">预备知识</h2><h3 id="HUB（集线器）与交换机工作原理">HUB（集线器）与交换机工作原理</h3><p>由于以太网等很多网络（常见HUB连接的内部网）是基于总线方式，物理上是广播的，就是当一个机器发给另一个机器的数据，HUB先收到然后把它接收到的数据再发给其他的（来的那个口不发了）每一个口，所以在HUB下面同一网段的所有机器的网卡都能接收到数据。</p>
<p>交换机的内部单片程序能记住每个口的MAC地址，以后就该哪个机器接收就发往哪个口，而不是像共享HUB那样发给所有的口，所以交换机下只有该接收 数据的机器的网卡能接收到数据，当然广播包还是发往所有口。显然交换机的工作模式使得两个机器传输数据的时候其他机器别的口也占用了，所以交换机决定了同 一网段同一时间只能有两个机器进行数据通信，而交换机上连接的两个机器传输数据的时候别的口没有占用，所以别的口之间也可以同时传输。这就是交换机与 HUB不同的两个地方，HUB是同一时间只能一个机器发数据并且所有机器都可以接收，只要不是广播数据交换机同一时间可以有对机器进行数据传输并且数据是 私有的。</p>
<h3 id="网卡工作原理">网卡工作原理</h3><p>再讲讲网卡的工作原理。网卡收到传输来的数据，网卡内的单片程序先接收数据头的目的MAC地址，根据计算机上的网卡驱动程序设置的接收模式判断该不 该接收，认为该接收就在接收后产生中断信号通知CPU，认为不该接收就丢弃不管，所以不该接收的数据网卡就截断了，计算机根本就不知道。CPU得到中断信 号产生中断，操作系统就根据网卡驱动程序中设置的网卡中断程序地址调用驱动程序接收数据，驱动程序接收数据后放入信号堆栈让操作系统处理。</p>
<h3 id="局域网如何工作">局域网如何工作</h3><p>数据在网络上是以很小的称为帧(Frame)的单位传输的帧由好几部分组成，不同的部分执行不同的功能。（例如，以太网的前12个字节存放的是源和 目的的地址，这些会告诉网络：数据的来源和去处。以太网帧的其他部分存放实际的用户数据、TCP/IP的报文头或IPX报文头等）。</p>
<p>帧通过特定的网络驱动程序进行成型，然后通过网卡发送到网线上。通过网线到达它们的目的机器，在目的机器的一端执行相反的过程。接收端机器的以太网卡捕获到这些帧，并告诉操作系统帧的到达，然后对其进行存储。就是在这个传输和接收的过程中，嗅探器会造成安全方面的问题。</p>
<p>通常在局域网（LAN）中同一个网段的所有网络接口都有访问在物理媒体上传输的所有数据的能力，而每个网络接口都还应该有一个硬件地址，该硬件地址 不同于网络中存在的其他网络接口的硬件地址，同时，每个网络至少还要一个广播地址。（代表所有的接口地址），在正常情况下，一个合法的网络接口应该只响应 这样的两种数据帧：</p>
<p>1、帧的目标区域具有和本地网络接口相匹配的硬件地址。</p>
<p>2、帧的目标区域具有“广播地址”。</p>
<p>在接受到上面两种情况的数据包时，网卡通过CPU产生一个硬件中断，该中断能引起操作系统注意，然后将帧中所包含的数据传送给系统进一步处理。</p>
<p>当采用HUB，用户发送一个报文时，这些报文就会发送到LAN上所有可用的机器。在一般情况下，网络上所有的机器都可以“听”到通过的流量，但对不属于自己的报文则不予响应（换句话说，机器A不会捕获属于机器B的数据，而是简单的忽略这些数据）。</p>
<p>如果局域网中某台机器的网络接口处于杂收（promiscuous）模式（即网卡可以接收其收到的所有数据包），那么它就可以捕获网络上所有的报文和帧，如果一台机器被配置成这样的方式，它（包括其软件）就是一个嗅探器。</p>
<h2 id="Sniffer">Sniffer</h2><h3 id="Sniffer原理">Sniffer原理</h3><p>在介绍完前面的内容后就可以来说明Sniffer的原理了。首先，要知道SNIFFER要捕获的东西必须是要物理信号能收到的报文信息。显然只要通 知网卡接收其收到的所有包（一般叫做杂收promiscuous模式：指网络上的所有设备都对总线上传送的数据进行侦听，并不仅仅是它们自己的数据。）， 在HUB下就能接收到这个网段的所有包，但是交换机下就只能是自己的包加上广播包。</p>
<p>要想在交换机下接收别人的包，那就要让其发往你的机器所在口。交换机记住一个口的MAC是通过接收来自这个口的数据后并记住其源MAC，就像一个机 器的IP与MAC对应的ARP列表，交换机维护一个物理口与MAC的表，所以可以欺骗交换机的。可以发一个包设置源MAC是你想接收的机器的MAC，那么 交换机就把你机器的网线插的物理口与那个MAC对应起来了，以后发给那个MAC的包就发往你的网线插口了，也就是你的网卡可以Sniffer到了。注意这 物理口与MAC的表与机器的ARP表一样是动态刷新的，那机器发包后交换HUB就又记住他的口了，所以实际上是两个在争，这只能应用在只要收听少量包就可 以的场合。</p>
<p>内部网基于IP的通信可以用ARP欺骗别人机器让其发送给你的机器，如果要想不影响原来两方的通信，可以欺骗两方，让其都发给你的机器再由你的机器 转发，相当于做中间人，这用ARP加上编程很容易实现。并且现在很多设备支持远程管理，有很多交换机可以设置一个口监听别的口，不过这就要管理权限了。</p>
<p>利用这一点，可以将一台计算机的网络连接设置为接受所有以太网总线上的数据，从而实现Sniffer。Sniffer就是一种能将本地网卡状态设成 ‘杂收’状态的软件，当网卡处于这种“杂收”方式时，该网卡具备“广播地址”，它对遇到的每一个帧都产生一个硬件中断以便提醒操作系统处理流经该物理媒体 上的每一个报文包。（绝大多数的网卡具备置成杂收方式的能力）</p>
<p>可见，Sniffer工作在网络环境中的底层，它会拦截所有的正在网络上传送的数据，并且通过相应的软件处理，可以实时分析这些数据的内容，进而分析所处的网络状态和整体布局。值得注意的是：Sniffer是极其安静的，它是一种消极的安全攻击。</p>
<p>嗅探器在功能和设计方面有很多不同。有些只能分析一种协议，而另一些可能能够分析几百种协议。一般情况下，大多数的嗅探器至少能够分析下面的协议：标准以太网、TCP/IP、IPX。</p>
<h3 id="嗅探器造成的危害">嗅探器造成的危害</h3><p>sniffing是作用在网络基础结构的底层。通常情况下， 用户并不直接和该层打交道，有些甚至不知道有这一层存在。所以，应该说Sniffer的危害是相当之大的，通常，使用Sniffer是在网络中进行欺骗的开始。它可能造成的危害：</p>
<p>嗅探器能够捕获口令。这大概是绝大多数非法使用Sniffer的理由，Sniffer可以记录到明文传送的用户名和口令。能够捕获专用的或者机密的 信息。比如金融帐号，许多用户很放心在网上使用自己的信用卡或现金帐号，然而Sniffer可以很轻松截获在网上传送的用户姓名、口令、信用卡号码、截止 日期、帐号和pin。比如偷窥机密或敏感的信息数据，通过拦截数据包，入侵者可以很方便记录别人之间敏感的信息传送，或者干脆拦截整个的email会话过 程。可以用来危害网络邻居的安全，或者用来获取更高级别的访问权限窥探低级的协议信息。</p>
<p>这是很可怕的事，通过对底层的信息协议记录，比如记录两台主机之间的网络接口地址、远程网络接口IP地址、IP路由信息和TCP连接的字节顺序号码 等。这些信息由非法入侵的人掌握后将对网络安全构成极大的危害，通常有人用Sniffer收集这些信息只有一个原因：他正要进行一次欺骗（通常的ip地址 欺骗就要求你准确插入TCP连接的字节顺序号），如果某人很关心这个问题，那么Sniffer对他来说只是前奏，今后的问题要大得多。（对于高级的黑客而 言，这是使用Sniffer的唯一理由吧）</p>
<p>事实上，如果在网络上存在非授权的嗅探器就意味着你的系统已经暴露在别人面前了。</p>
<p>一般Sniffer只嗅探每个报文的前200到300个字节。用户名和口令都包含在这一部分中，这是我们关心的真正部分。</p>
<p>简单的放置一个嗅探器并将其放到随便什么地方将不会起到什么作用。将嗅探器放置于被攻击机器或网络附近，这样将捕获到很多口令，还有一个比较好的方 法就是放在网关上。Sniffer通常运行在路由器，或有路由器功能的主机上。这样就能对大量的数据进行监控。Sniffer属第二层次的攻击。通常是攻 击者已经进入了目标系统，然后使用Sniffer这种攻击手段，以便得到更多的信息。如果这样的话就能捕获网络和其他网络进行身份鉴别的过程。</p>
<div><br><br><a href="http://securityxploded.com/errata-guide-to-ettercap.php" target="_blank" rel="external">http://www.blhekai.com/network-sniffer-tool-principles-wireshark.html</a><br><br><a href="http://securityxploded.com/errata-guide-to-ettercap.php" target="_blank" rel="external">http://securityxploded.com/errata-guide-to-ettercap.php</a><br><br>&nbsp;<br><br></div></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2013/12/03/计算机体系结构的建立/" itemprop="url">
                计算机体系结构的建立
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2013-12-03T21:35:24+08:00" content="2013-12-03">
            2013-12-03
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>我们学一个专业，不管是什么专业，要完整的对该专业有一个深入的认识和了解，就都必须涉及到建立体系的过程。这个体系的构建是很缓慢的一个过程。一个学期你学的那些专业课都是这个体系的砖瓦，只不过一开始你并不知道原来这些专业课是用来构建这个体系的砖瓦。<strong>这就好像我们玩填字迷宫游戏一样，要等到你解出了一定的答案之后，你才会发现，原来这里面的体系结构是这样的，</strong>然 后你的脑海里才会慢慢的成型出一个庞大的计算机体系架构，这个时候你再回过头，发现原来之前学过的那些课程都是来填补你的那个庞大的体系架构的，而对你以 后的学习而言，既然你已经有这个成型的体系架构了，就好像造房子已经造出了一个框架，接下来的任务，就是把房子里的每一个房间都填满家具。</p>
<p><span id="more-856"></span></p>
<p><img src="http://m3.img.libdd.com/farm5/d/2013/1203/14/CB823D8F12F5E4615E11B26E7353E9BD_B500_900_500_500.jpeg" alt=""></p>
<p>这个月我断断续续的在思考计算机的体系架构，大概也总结归纳出了一些东西。其中说到给我帮助最大的一门课程，要数《计算机组成原理》这门课程了。这门课程帮助我更加深入了解了硬件层面的东西，它比汇编层更加底层，帮助我串起了计算机内部的整个流程。</p>
<p>&nbsp;</p>
<p>接下来我开始我想说的话题：关于计算机的体系架构。</p>
<p>这是一个广义的话题，不单单指《计算机组成原理》这本书。</p>
<p>首先我想说的是，既然是体系架构，我们就可以把它想象成一个二维的平面，它既有纵向的轴，又有横向的轴。合起来就是一个二维的平面。既然是二维的，首先我们来建立坐标系。</p>
<p><img src="http://m3.img.libdd.com/farm5/d/2013/1203/14/28AC887E1F6800B1A5086057BEB8E112_B500_900_500_291.jpeg" alt=""></p>
<p>现在这个平面是完全空白的，接下来我要慢慢填充这个平面</p>
<p>&nbsp;</p>
<p><strong>1.1 前言 </strong></p>
<p>后面我要说的很多东西，大家可以参考这本书：深入理解计算机系统（ComputerSystems: A Programmer&#8217;sPerspective）。</p>
<p>我是在写这篇文章发现写不清楚的时候搜到的这本书。原来外国人早就把我想说的都说的无比详细了&#8211;|||</p>
<p>我自己首先尝试以一种坐标化的简洁的方式来阐释这个庞大的问题。</p>
<p>&nbsp;</p>
<p><strong>1.2从硬件到软件</strong></p>
<p>下面这个纵轴实现了人机交互。这个y轴大概可以是这个样子的：</p>
<p><img src="http://m2.img.libdd.com/farm5/d/2013/1203/14/21EF8339891F249A8B282EF2E9C96C41_B500_900_500_335.jpeg" alt=""></p>
<p>硬件和软件就不说了，大家肯定都知道，但是不懂。看《计算机组成原理》这本书你就能对硬件有深入的了解；而对软件要有深入了解，那就必须写代码了，因为软件就是代码写出来的。</p>
<p>操作系统：连接硬件到软件的，是操作系统。操作系统的功能是调度硬件。用户发出的命令交给操作系统，再由操作系统管理硬件完成相应的功能。这就是整个人机交互的过程。</p>
<p>API：这个层是专门开放给programers的。programers做的工作大都是与API打交道，不外乎是两种：</p>
<ol>
<li><p>初级的programers 用API。</p>
</li>
<li><p>高级的programers 写API。</p>
</li>
</ol>
<p>这个纵轴其实就是一台电脑里面的所有东西。有硬件，有软件（包括操作系统也是软件）。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>1.3学科纵轴的建立：</strong></p>
<p>学科纵轴的建立 是建立在<strong>1.2这条纵轴</strong>的基础上的。我把它分为三个部分：</p>
<p>专业应用学科</p>
<p>专业理论学科</p>
<p>数学，物理工具学科</p>
<p>&nbsp;</p>
<p>下面我们来看看这条学科纵轴：</p>
<p><img src="http://m3.img.libdd.com/farm4/d/2013/1203/15/28B08F291DB2A9C7F799EB70054DAC6F_B500_900_500_374.jpeg" alt=""></p>
<p>这条纵轴的建立的依据也是以<strong>1.2计算机组成的纵轴</strong>为基础而建立的。</p>
<p>这条纵轴是从理论到应用的走向：</p>
<p>工具-&gt; 专业理论-&gt; 专业应用</p>
<p><strong>为什么从数学开始？</strong>答案很简单，从 计算机 这三个字中就可以看出，计算机设计的初衷，是为了解决计算问题。所以如果大家不学好数学，肯定学不好计算机啦- -</p>
<p>接下来的<strong>专业理论学科，</strong>就是我今天要讲的整个东西的核心了。我们大学学的这些课程，是理论课程。理论是应用的前提。</p>
<p>而最顶层的就是<strong>专业应用</strong>了。协会里面大家做的事情不管是 Web Linux Windows 逆向 渗透，都是偏重于应用层面的。</p>
<p>有一个80：20的理论，说计算机专业学的100%的知识到最后真正只要用20%。偏向于理论还是偏向于应用，说白了就是这个比例的问题。你是想从上到下的学习，还是从下到上的学习。每个人的学习路线都不一样。而我的选择是从下到上。先建立地基，再造大厦。</p>
<p>首先我们要掌握 数学和英语 作为工具，接下来我们需要学习理论，最后才能把理论应用于实践。</p>
<p><strong>我今天尝试着想讲明白的事情，是如何把所有学的东西全部串联起来。</strong></p>
<p><strong>最难讲清楚的，是专业课程之间的联系。</strong></p>
<p>试问：</p>
<p>没有学好高数，你连积分都不会，怎么学信号与系统的傅立叶变换？</p>
<p>你连信号与系统的傅立叶变换都不会，你怎么学通信原理的编码和载波？</p>
<p>你没学好通信原理，怎么学计算机通信网络整个体系？大家都知道TCP有三次握手协议，有ACK和SYN，你知道ACK背后的error cotrol么？知道一根网线里面传的是模拟信号还是数字信号么？</p>
<p>&nbsp;</p>
<p>有 人说我即使不知道这些东西我也可以写代码搞安全啊。确实，由于抽象和封装，你在应用层可以完全不用理会物理层，即使你不知道一切都可以工作的很好。但是如 果你能知道底层的一些细节，绝对会对你写应用层有很多帮助。而且体系框架建立的过程中牵涉到很多跨学科的东西，计算机本身就是一门跨学科。</p>
<p>&nbsp;</p>
<p><strong>1.4编程语言纵轴的建立</strong></p>
<p><img src="http://m3.img.libdd.com/farm4/d/2013/1203/16/3A95F144545835E7EA3E4773669E547E_B500_900_500_200.jpeg" alt=""></p>
<p>&nbsp;</p>
<p>从这条纵轴我们可以看到：从最底层的二进制数据到对应的高级语言的关系：</p>
<p>总结出了下面几点：</p>
<p>1.越底层的语言，机器越看得懂；越高层的语言，人越看的懂。</p>
<p>2.从底层到高层的过程，其实是一个不断抽象，不断封装的过程。所谓抽象，其中一个思想就是封装。如果说我想实现同样一个功能，用不同的语言可能会有大致如下的一个公式（：</p>
<p><strong>Python code _ 1 line = C code _ 10 lines = Asm code _ 100 lines = Binary code _ 1000 bits</strong></p>
<p>可 以看到我们如果用python写出来的代码，这种高级语言屏蔽了太多计算机内部的一些细节东西。比如说内存管理。用高级语言写代码，对于人的效率大大提 高，但是对于机器的效率却大大下降了。由此导致的对于人而言，写代码更加方便，但是想要精确地修改某些功能的难度也大大提高了。我们跨学科的来看看下面两 条线：</p>
<p>&nbsp;</p>
<p>在生物上，我们可以看到这样的一条线：</p>
<p><strong>碱基对-&gt;染色体-&gt; 细胞-&gt; 器官-&gt; 组织-&gt; 个体</strong></p>
<p>在物理上，我们可以同样看到这样一条线：</p>
<p><strong>夸克-&gt;原子-&gt; 分子-&gt; 化合物</strong></p>
<p>更进一步，我们还可以这样子连接这条线：</p>
<p><strong>夸克-&gt;原子-&gt; 分子-&gt; 化合物-**</strong>&gt;碱基对-&gt;染色体-&gt; 细胞-&gt; 器官-&gt; 组织-&gt; 个体**</p>
<p>如此我们把学科之间也给联系起来了。</p>
<p>大 自然完美的体现了抽象和封装这个思想。我们生活的这个维度，只能看到个体。而组织这个概念，也是近代生物科学发展起来之后才有的概念。更不用说去看细胞， 看染色体了。大自然封装的很完美，它只留了很小的一个口子，让我们可以用显微镜，用科学的方法去拆开这个个体，一窥究竟。</p>
<p>&nbsp;</p>
<p><strong>1.5 OSI网络模型</strong></p>
<p><img src="http://m1.img.libdd.com/farm5/d/2013/1203/17/ACBC000BE4E2053289C86A98EE1C1EBF_B500_900_404_467.png" alt=""></p>
<p>刚才讲的都是计算机个体里面的东西。如何做到计算机之间的联系？这里就引出通信这个概念。通信的目的是将个体联系起来。</p>
<p>OSI模型是什么？说白了还是封装。把底层的数据一层一层封装起来。打包传送起来肯定比散装的方便嘛。</p>
<p>有了这个网络模型之后，我们引出了通信这个概念，其实这里我们可以把通信和计算机两门学科相互之间联系起来了。</p>
<p>把单个的计算机看成一个一个的细胞，通信就是细胞与细胞之间的信息交互。</p>
<p><img src="http://m1.img.libdd.com/farm5/d/2013/1203/21/B42D9E4F18A2899BB3A60FCCC2713578_B500_900_417_256.jpeg" alt=""></p>
<p>这样我们建立了一个学科横轴：计算机和通信</p>
<p><img src="http://m1.img.libdd.com/farm4/d/2013/1203/21/7110BA66C275869CDF47ABC3D23B0656_B500_900_375_117.jpeg" alt=""></p>
<p>&nbsp;</p>
<p><strong>1.6编译语言横轴的建立</strong></p>
<p>这里涉及最简单的编译原理：一个helloworld.c的程序是如何变成可执行文件helloworld的?</p>
<p>给出下面这张图：</p>
<p><img src="http://m1.img.libdd.com/farm4/d/2013/1203/21/9E4C6FD3975A75EB0153FA47B7CFD707_B500_900_500_114.jpeg" alt=""></p>
<p>这里也建立了一个横轴：从 源代码 到 可执行文件的 横轴。</p>
<p>建立这两者关联的，叫编译器（这里是广义的叫法。广义的编译器包含了预处理器，狭义的编译器和链接器等）。</p>
<p>纵向来看，hello.c在人看来是字符，在机器看来是0101101二进制数据；</p>
<p>hello程序在人看来是一个程序，在机器看来是 0101的 二进制指令。</p>
<p>所以这个横轴建立起来的关系是如何把数据（源代码）变成指令（可执行文件）的</p>
<p><img src="http://m1.img.libdd.com/farm4/d/2013/1203/21/614ED586C8BFA369E4B8D08ED52773D0_B500_900_500_325.jpeg" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2013/11/29/信息隐藏–LSB算法/" itemprop="url">
                信息隐藏–LSB算法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2013-11-29T19:39:13+08:00" content="2013-11-29">
            2013-11-29
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>LSB算法，也就是最低有效位： Least Significant Bit。</p>
<p>在讲算法之前，我们先了解两个概念：</p>
<p>1.bmp图片是无损图片，每个像素点都用三个0-255的值来表示red，green，blue。</p>
<p>（注意：bmp图片的前14比特是头信息，最好不要用于该算法）。</p>
<p>而JPG图片是经过了DCT变换的，不能使用该算法。</p>
<p>2.这里为了算法简单起见，我们使用灰度图像：每个像素点用0-255的值来表示黑白颜色深度。</p>
<p>3.二值图像：每个像素点用0代表黑色，1代表白色</p>
<p>现在有一张宿主图片，我们要在宿主图片里面嵌入要隐藏的图片（当然可以是其它字符串），算法的思想是这样的：</p>
<p>1.将宿主图像变成灰度图像，将要隐藏的图像变成二值图像。</p>
<p>2.利用Matlab的bitget和bitset函数获得宿主图像中每个像素点的最低比特位（每个像素点总共有8位，2^8 = 256）将最低比特位与二值图像的位进行异或。如果结果为0，则不变；如果结果为1,如果设置宿主图像的最低比特位为1，则变成0；最低比特位是0，则变成1。</p>
<p>注：这里必须保证宿主图片的大小必须大于要隐藏图片的大小。</p>
<p>3.因为改变最低比特位对0-255的像素点来说只改变 +1 或 -1的大小，对于整个像素点的变化几乎很小看不到。所以可以用该算法来做信息隐藏。</p>
<p><a href="http://miibotree.com/?attachment_id=832" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/lsb.png" alt="lsb"></a></p>
<p><span id="more-831"></span></p>
<p>下面是自己写的matlab代码：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">%Author : Miibotree</span><br><span class="line">%Time : <span class="number">2013.11.20</span></span><br><span class="line"></span><br><span class="line">clear all<span class="comment">;</span></span><br><span class="line">clc<span class="comment">;</span></span><br><span class="line">close all<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">xor_zero = 0<span class="comment">;</span></span><br><span class="line">xor_one = 0<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">%ary 表示那个比特面,1是最低比特位</span><br><span class="line">ary = 5<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">file_name1 = '1.bmp'<span class="comment">;</span></span><br><span class="line">cover_object = imread(file_name1)<span class="comment">;</span></span><br><span class="line">cover_object = rgb2gray(cover_object)<span class="comment">;</span></span><br><span class="line">cover_object_ll = bitget(cover_object, ary)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">figure<span class="comment">;</span></span><br><span class="line">imshow(cover_object)<span class="comment">;</span></span><br><span class="line">title('origin host picture')<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">figure<span class="comment">;</span></span><br><span class="line">imshow(255*cover_object_ll)<span class="comment">;</span></span><br><span class="line">title('origin hot pic`lowest bit')<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">file_name2 = '2.bmp'<span class="comment">;</span></span><br><span class="line">message = imread(file_name2)<span class="comment">;</span></span><br><span class="line">message = rgb2gray(message)<span class="comment">;</span></span><br><span class="line">message = im2bw(message, graythresh(message))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">figure<span class="comment">;</span></span><br><span class="line">imshow(message)<span class="comment">;</span></span><br><span class="line">title('hidden picture')<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Mc = size(cover_object, 1)<span class="comment">; %Height</span></span><br><span class="line">Nc = size(cover_object, 2)<span class="comment">; %Width</span></span><br><span class="line"></span><br><span class="line">Mm = size(message, 1)<span class="comment">; %Height</span></span><br><span class="line">Nm = size(message, 2)<span class="comment">; %Width</span></span><br><span class="line"></span><br><span class="line">watermarked_image = cover_object<span class="comment">;</span></span><br><span class="line">temp = 1<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">for ii = 1 : Mc</span><br><span class="line">for jj = 1 : Nc</span><br><span class="line">if temp &amp;lt<span class="comment">; Mm * Nm</span></span><br><span class="line">if cover_object_ll(ii, jj) ~= message(temp)</span><br><span class="line">if cover_object_ll(ii, jj) == 1</span><br><span class="line">watermarked_image(ii, jj) = bitset(watermarked_image(ii,jj), ary, 0)<span class="comment">;</span></span><br><span class="line">xor_zero = xor_zero + 1<span class="comment">;</span></span><br><span class="line">else</span><br><span class="line">water_marked_image(ii, jj) = bitset(watermarked_image(ii,jj), ary, 1)<span class="comment">;</span></span><br><span class="line">xor_one = xor_one + 1<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line">temp = temp + 1<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">figure<span class="comment">;</span></span><br><span class="line">imshow(watermarked_image)<span class="comment">;</span></span><br><span class="line">title('watermarked picture')<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">figure<span class="comment">;</span></span><br><span class="line">watermarked_image_ll = bitget(watermarked_image, ary)<span class="comment">;</span></span><br><span class="line">imshow(255 * watermarked_image_ll)<span class="comment">;</span></span><br><span class="line">title('watermarked picture`s lowest bit')<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>给大家看看效果：</p>
<p>左边是原图，右边是嵌入水印的图。</p>
<p><a href="http://miibotree.com/?attachment_id=834" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/Screenshot-from-2013-11-29-193505.png" alt="Screenshot from 2013-11-29 19:35:05"></a></p>
<p>&nbsp;</p>
<p>隐藏的图片（经过了二值化处理）：</p>
<p><a href="http://miibotree.com/?attachment_id=847" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/Screenshot-from-2013-11-29-204830.png" alt="Screenshot from 2013-11-29 20:48:30"></a></p>
<p>&nbsp;</p>
<p>最低比特位对比（可以看到最上面几行的变化）：</p>
<p><a href="http://miibotree.com/?attachment_id=848" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/Screenshot-from-2013-11-29-204822.png" alt="Screenshot from 2013-11-29 20:48:22"></a></p>
<p>如果我在第5个比特位嵌入信息，会看到图像已经有点变化了</p>
<p><a href="http://miibotree.com/?attachment_id=850" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/Screenshot-from-2013-11-29-2046531.png" alt="Screenshot from 2013-11-29 20:46:53"></a></p>
<p><a href="http://miibotree.com/?attachment_id=851" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/Screenshot-from-2013-11-29-204721.png" alt="Screenshot from 2013-11-29 20:47:21"></a></p>
<p>&nbsp;</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2013/11/27/信息隐藏–DCT图像变换/" itemprop="url">
                信息隐藏–DCT图像变换
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2013-11-27T18:26:07+08:00" content="2013-11-27">
            2013-11-27
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>DCT(Discrete Cosine Transform)，又叫离散余弦变换，它的第二种类型，经常用于信号和图像数据的压缩。经过DCT变换后的数据能量非常集中，一般只有左上角的数值是非零的，也就是能量都集中在离散余弦变换后的直流和低频部分。</p>
<p>参考博客：</p>
<p><a href="http://wuyuans.com/2012/11/dct2/" target="_blank" rel="external">http://wuyuans.com/2012/11/dct2/</a></p>
<h2 id="1-一维DCT变换">1.一维DCT变换</h2><p><a href="http://miibotree.com/?attachment_id=816" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/dct1.jpg" alt="dct1"></a></p>
<h2 id="2-二维DCT变换">2.二维DCT变换</h2><p><a href="http://miibotree.com/?attachment_id=817" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/dct2.jpg" alt="dct2"></a></p>
<h2 id="3-二维DCT反变换">3.二维DCT反变换</h2><p><a href="http://miibotree.com/?attachment_id=818" target="_blank" rel="external"><img src="http://miibotree.com/wp-content/uploads/2013/11/idct2.jpg" alt="idct2"></a></p>
<p>matlab中有相关函数如下：</p>
<p><span id="more-815"></span></p>
<p>[<a href="http://www.mathworks.cn/cn/help/signal/ref/dct.html" target="_blank" rel="external">http://www.mathworks.cn/cn/help/signal/ref/dct.html</a></p>
<p>](<a href="http://www.mathworks.cn/cn/help/signal/ref/dct.html" target="_blank" rel="external">http://www.mathworks.cn/cn/help/signal/ref/dct.html</a>)</p>
<p>我使用linux下的Octave，在使用rgb2gray函数的时候提示没有找到该函数，发现没有安装image包。直接在终端安装octave-image自动安装相关依赖包。</p>
<p>在Octave(Mablab)里面，我们要用到的两个函数，分别是二维的dct变换和二维的dct逆变换。下面来看下这两个函数：</p>
<style type="text/css"><!--
p, li { white-space: pre-wrap;
--></style>

<p>dct2函数：</p>
<blockquote>
<p><span style="font-family: 'Liberation Mono'; font-size: 11pt; color: #000000;">y = dct2 (x)</span></p>
<p><span style="font-family: 'Liberation Mono'; font-size: 11pt; color: #000000;"> Computes the 2-D discrete cosine transform of matrix x</span></p>
<p><span style="font-family: 'Liberation Mono'; font-size: 11pt; color: #000000;"> y = dct2 (x, m, n) or y = dct2 (x, [m n])</span></p>
<p><span style="font-family: 'Liberation Mono'; font-size: 11pt; color: #000000;"> Computes the 2-D DCT of x after padding or trimming rows to m and</span></p>
<p><span style="font-family: 'Liberation Mono'; font-size: 11pt; color: #000000;"> columns to n.</span></p>
</blockquote>
<p>idct2函数：</p>
<p><style type="text/css"><!--
p, li { white-space: pre-wrap; }
--></style></p>
<blockquote>
<p>y = idct2 (x)</p>
<p>Computes the inverse 2-D discrete cosine transform of matrix x</p>
<p>&nbsp;</p>
<p>y = idct2 (x, m, n) or y = idct2 (x, [m n])</p>
<p>Computes the 2-D inverse DCT of x after padding or trimming rows to m and</p>
<p>columns to n.</p>
</blockquote>
<p>OK，我们要做的工作，就是将宿主图像按照8*8进行分块，然后对每个分块进行dct变换，由于信息基本都存储在上三角部分，我们在下三角中可以嵌入我们的隐藏信息。</p>
<p>然后将嵌入隐藏信息的图片进行dct反变换，得到隐藏信息后的图像。</p>
<p>还是把代码贴出来好了。不是自己写的。</p>
<p>dct2_emabled.m</p>
<p></p><p style="-qt-block-indent: 0; text-indent: 0px; margin: 0px;"><br><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">%Project: Threshold-Based Correlation in DCT mid-band</span><br><span class="line">% Uses two PN sequences<span class="comment">; one for a &amp;quot;0&amp;quot; and another for a &amp;quot;1&amp;quot;</span></span><br><span class="line">% 水印嵌入&amp;lt<span class="comment">;/p&amp;gt;</span></span><br><span class="line">clear all<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 保存开始时间</span><br><span class="line">start_time=cputime<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">k=10<span class="comment">; % 设置嵌入强度</span></span><br><span class="line">blocksize=8<span class="comment">; % 设置块的大小</span></span><br><span class="line"></span><br><span class="line">midband=[ <span class="number">0,0,0,1</span>,<span class="number">1,1,1,0</span><span class="comment">; % defines the mid-band frequencies of an 8x8 dct</span></span><br><span class="line"><span class="number">0,0,1,1</span>,<span class="number">1,1,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">0,1,1,1</span>,<span class="number">1,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,1,1</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,1,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,0,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,0,0,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">0,0,0,0</span>,<span class="number">0,0,0,0</span> ]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 读入原始图像</span><br><span class="line">file_name=&amp;#039<span class="comment">;_lena_std_bw.bmp&amp;#039;;</span></span><br><span class="line">cover_object=double(imread(file_name))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 原始图像的行数与列数</span><br><span class="line">Mc=size(cover_object,1)<span class="comment">; %原图的行数</span></span><br><span class="line">Nc=size(cover_object,2)<span class="comment">; %原图的列数</span></span><br><span class="line"></span><br><span class="line">% 确定可嵌入的最大信息量</span><br><span class="line">max_message=Mc*Nc/(blocksize^2)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 读入水印图像</span><br><span class="line">file_name=&amp;#039<span class="comment">;c.bmp&amp;#039;;</span></span><br><span class="line">message=double(imread(file_name))<span class="comment">;</span></span><br><span class="line">%水印图像的行数与列数</span><br><span class="line">Mm=size(message,1)<span class="comment">; %水印图像的行数</span></span><br><span class="line">Nm=size(message,2)<span class="comment">; %水印图像的列数</span></span><br><span class="line"></span><br><span class="line">figure(1)</span><br><span class="line">imshow(message,[])<span class="comment">;</span></span><br><span class="line">title(&amp;#039<span class="comment">;水印&amp;#039;);</span></span><br><span class="line"></span><br><span class="line">% 将水印图像矩阵转换为0，1组成的向量</span><br><span class="line">message=reshape(message, 1, Mm*Nm)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 检查水印信息是否过大</span><br><span class="line">if (length(message) &amp;amp<span class="comment">;gt; max_message)</span></span><br><span class="line">error(&amp;#039<span class="comment">;水印太大&amp;#039;)</span></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 将message_vector置为全1向量，并将message写入</span><br><span class="line">message_vector=ones(1,max_message)<span class="comment">;</span></span><br><span class="line">message_vector(1:length(message))=message<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 将cover_object写入watermarked image</span><br><span class="line">watermarked_image=cover_object<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">key=1100<span class="comment">;</span></span><br><span class="line">% 重置随机数发生器状态为key</span><br><span class="line">rand(&amp;#039<span class="comment">;state&amp;#039;,key);</span></span><br><span class="line"></span><br><span class="line">% 生成伪随机数</span><br><span class="line">pn_sequence_zero=round(2*(rand(1,sum(sum(midband)))-0.5))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 图象分块并嵌入</span><br><span class="line">x=1<span class="comment">;</span></span><br><span class="line">y=1<span class="comment">;</span></span><br><span class="line">for (kk = 1:length(message_vector))</span><br><span class="line">% 分块进行DCT变换</span><br><span class="line">dct_block=dct2(cover_object(y:y+blocksize-1,x:x+blocksize-1))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 如果message_vector==0 并且midband==1，那么嵌入 pn_sequence_zero</span><br><span class="line">ll=1<span class="comment">;</span></span><br><span class="line">if (message_vector(kk)==0)</span><br><span class="line">for ii=1:blocksize</span><br><span class="line">for jj=1:blocksize</span><br><span class="line">if (midband(jj,ii)==1)</span><br><span class="line">dct_block(jj,ii)=dct_block(jj,ii)+k*pn_sequence_zero(ll)<span class="comment">;</span></span><br><span class="line">ll=ll+1<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 逆DCT变换</span><br><span class="line">watermarked_image(y:y+blocksize-1,x:x+blocksize-1)=idct2(dct_block)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 移动到下一块</span><br><span class="line">if (x+blocksize) &amp;amp<span class="comment">;gt;= Nc</span></span><br><span class="line">x=1<span class="comment">;</span></span><br><span class="line">y=y+blocksize<span class="comment">;</span></span><br><span class="line">else</span><br><span class="line">x=x+blocksize<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 转换为uint8 并将watermarked_image_uint8写入watermarked_image_uint8.bmp</span><br><span class="line">watermarked_image_uint8=uint8(watermarked_image)<span class="comment">;</span></span><br><span class="line">imwrite(watermarked_image_uint8,&amp;#039<span class="comment">;watermarked_image_uint8.bmp&amp;#039;,&amp;#039;bmp&amp;#039;);</span></span><br><span class="line"></span><br><span class="line">% 显示运行时间</span><br><span class="line">elapsed_time=cputime-start_time,</span><br><span class="line"></span><br><span class="line">% 计算psnr</span><br><span class="line">psnr=psnr(cover_object,watermarked_image),</span><br><span class="line"></span><br><span class="line">% 显示嵌入水印图象与原始图象</span><br><span class="line">figure(2)</span><br><span class="line">subplot(1,2,1)<span class="comment">;</span></span><br><span class="line">imshow(watermarked_image_uint8,[])</span><br><span class="line">title(&amp;#039<span class="comment">;嵌入水印图像&amp;#039;)</span></span><br><span class="line">subplot(1,2,2)</span><br><span class="line">imshow(cover_object,[])<span class="comment">;</span></span><br><span class="line">title(&amp;#039<span class="comment">;原始图像&amp;#039;);</span></span><br><span class="line">&amp;lt<span class="comment">;p style=&amp;quot;-qt-block-indent: 0; text-indent: 0px; margin: 0px;&amp;quot;&amp;gt;</span></span><br></pre></td></tr></table></figure></p>
<p>dct2_recover.m</p>
<p></p><p style="-qt-block-indent: 0; text-indent: 0px; margin: 0px;"><br><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">%Project: Threshold-Based Correlation in DCT mid-band</span><br><span class="line">% Uses two PN sequences<span class="comment">; one for a &amp;quot;0&amp;quot; and another for a &amp;quot;1&amp;quot;</span></span><br><span class="line">% 水印提取&amp;lt<span class="comment">;/p&amp;gt;</span></span><br><span class="line">clear all<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 保存开始时间</span><br><span class="line">start_time=cputime<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">blocksize=8<span class="comment">; % 设置块的大小</span></span><br><span class="line">midband=[ <span class="number">0,0,0,1</span>,<span class="number">1,1,1,0</span><span class="comment">; % defines the mid-band frequencies of an 8x8 dct</span></span><br><span class="line"><span class="number">0,0,1,1</span>,<span class="number">1,1,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">0,1,1,1</span>,<span class="number">1,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,1,1</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,1,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,1,0,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">1,0,0,0</span>,<span class="number">0,0,0,0</span><span class="comment">;</span></span><br><span class="line"><span class="number">0,0,0,0</span>,<span class="number">0,0,0,0</span> ]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 读入嵌入水印图像</span><br><span class="line">file_name=&amp;#039<span class="comment">;watermarked_image_uint8.bmp&amp;#039;;</span></span><br><span class="line">watermarked_image=double(imread(file_name))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 嵌入水印图像的行数与烈数</span><br><span class="line">Mw=size(watermarked_image,1)<span class="comment">; %行数</span></span><br><span class="line">Nw=size(watermarked_image,2)<span class="comment">; %列数</span></span><br><span class="line"></span><br><span class="line">% 确定最大嵌入信息量</span><br><span class="line">max_message=Mw*Nw/(blocksize^2)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 读入水印</span><br><span class="line">file_name=&amp;#039<span class="comment">;c.bmp&amp;#039;;</span></span><br><span class="line">orig_watermark=double(imread(file_name))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 水印的行数与列数</span><br><span class="line">Mo=size(orig_watermark,1)<span class="comment">; %行数</span></span><br><span class="line">No=size(orig_watermark,2)<span class="comment">; %列数</span></span><br><span class="line"></span><br><span class="line">key=1100<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 置随机数发生器的状态为key</span><br><span class="line">rand(&amp;#039<span class="comment">;state&amp;#039;,key);</span></span><br><span class="line"></span><br><span class="line">% 产生伪随机序列</span><br><span class="line">pn_sequence_zero=round(2*(rand(1,sum(sum(midband)))-0.5))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% process the image in blocks</span><br><span class="line">x=1<span class="comment">;</span></span><br><span class="line">y=1<span class="comment">;</span></span><br><span class="line">for (kk = 1:max_message)</span><br><span class="line"></span><br><span class="line">% 对块进行DCT变换</span><br><span class="line">dct_block=dct2(watermarked_image(y:y+blocksize-1,x:x+blocksize-1))<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% extract the middle band coeffcients</span><br><span class="line">ll=1<span class="comment">;</span></span><br><span class="line">for ii=1:blocksize</span><br><span class="line">for jj=1:blocksize</span><br><span class="line">if (midband(jj,ii)==1)</span><br><span class="line">sequence(ll)=dct_block(jj,ii)<span class="comment">;</span></span><br><span class="line">ll=ll+1<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 计算相关性系数</span><br><span class="line">correlation(kk)=corr2(pn_sequence_zero,sequence)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 移动到下一块</span><br><span class="line">if (x+blocksize) &amp;amp<span class="comment">;gt;= Nw</span></span><br><span class="line">x=1<span class="comment">;</span></span><br><span class="line">y=y+blocksize<span class="comment">;</span></span><br><span class="line">else</span><br><span class="line">x=x+blocksize<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 如果相关性系数大于平均值那么置 &amp;#039<span class="comment">;0&amp;#039;, 反之置 &amp;#039;1&amp;#039;</span></span><br><span class="line">for (kk=1:max_message)</span><br><span class="line">if (correlation(kk) &amp;amp<span class="comment">;gt;mean(correlation(1:max_message)))</span></span><br><span class="line">message_vector(kk)=0<span class="comment">;</span></span><br><span class="line">else</span><br><span class="line">message_vector(kk)=1<span class="comment">;</span></span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 重新排列提取水印</span><br><span class="line"></span><br><span class="line">message=reshape(message_vector(1:Mo*No),Mo,No)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">% 显示运行时间</span><br><span class="line">elapsed_time=cputime-start_time,</span><br><span class="line"></span><br><span class="line">% 显示提取水印与原始水印</span><br><span class="line"></span><br><span class="line">figure(3)</span><br><span class="line">imshow(message,[])</span><br><span class="line">title(&amp;#039<span class="comment">;提取水印&amp;#039;)</span></span><br><span class="line">figure(4)</span><br><span class="line">imshow(orig_watermark,[])</span><br><span class="line">title(&amp;#039<span class="comment">;原始水印&amp;#039;);</span></span><br><span class="line">&amp;lt<span class="comment">;p style=&amp;quot;-qt-block-indent: 0; text-indent: 0px; margin: 0px;&amp;quot;&amp;gt;</span></span><br></pre></td></tr></table></figure></p>
<p>大概解释下代码的意思：</p>
<p>设置了一个midband的8*8矩阵，1表示在这位可以嵌入信息。</p>
<p>注意这里的message信息图片是一张二值化的图片，也就是说每个像素点不是0就是1.</p>
<p>产生一个伪随机序列pn_sequence_zero，附加到宿主图片中</p>
<p>还原的时候通过计算相关系数corr2函数与平均值进行比较来还原</p>
<p>这里用Octave的时候还发现了corr2.m函数的一个拼写bug，激动了好一会儿。把bug提交到主页上了。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/">&laquo;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/5/">&raquo;</a>
  </nav>


            </div>

            

            
        </div>

        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/about me.JPG" alt="Miibotree" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Miibotree</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">211</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">1</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">111</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Miibotree</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



        </div>
    </footer>

    <div class="back-to-top"></div>
</div>

<script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
  
  

  



  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.4"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.4"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.4" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>



<script type="text/javascript">
    $(document).ready(function () {
        if (CONFIG.sidebar === 'always') {
            displaySidebar();
        }
    });
</script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



  
  

  







<!-- lazyload -->
<script type="text/javascript" src="/js/lazyload.js"></script>
<script type="text/javascript">
    jQuery(function () {
        jQuery("#posts img").lazyload({
            placeholder: "/images/loading.gif",
            effect: "fadeIn"
        });
    });
</script>
</body>
</html>
